<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<base href="${basePath}" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<LINK rel="Bookmark" href="/favicon.ico">
<LINK rel="Shortcut Icon" href="/favicon.ico" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<script type="text/javascript" src="lib/PIE_IE678.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css"
	href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css"
	href="lib/Hui-iconfont/1.0.7/iconfont.css" />
<link rel="stylesheet" type="text/css" href="lib/icheck/icheck.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="static/h-ui/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<!--/meta 作为公共模版分离出去-->

<title>新增领队</title>
<link href="lib/webuploader/0.1.5/webuploader.css" rel="stylesheet"
	type="text/css" />
</head>
<body>
	<div class="page-container">
		<form class="form form-horizontal"  action="leader/saveLeader" method ="post" id="form-leader-add">
			<div class="row cl" id="div-club-id">
				<label class="form-label col-xs-4 col-sm-2"><span
					class="c-red">*</span>旅城号：</label>
				<div class="formControls col-xs-8 col-sm-9">
						<input type="text" class="input-text" value="${leader.user_no!}" placeholder="" id="userNo_"
						name="userNo_" disabled ="disabled" >
						<input type="hidden" class="input-text" value="${leader.id!}" placeholder="" id="id"
						name="id">
						<input type="hidden" class="input-text" value="${leader.user_no!}" placeholder="" id="userNo"
						name="userNo">
					
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">真实姓名：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="${leader.real_name!}" placeholder="" id="realName"
						name="realName">
				</div>
			</div>
			
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">昵称：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="${leader.nick_name!}" placeholder=""
						id="nickName" name="nickName">
				</div>
			</div>
			
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2"><span
					class="c-red">*</span>手机号：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="${leader.phone_number!}" placeholder="" id="phoneNumber"
						name="phoneNumber">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2"><span
					class="c-red">*</span>性别：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<div class="radio-box">
					<input name="gender" type="radio" id="gender_1" value="1"  <#if ("${leader.gender!''}"== "1"||"${leader.gender!''}"=="")> checked </#if> />
						<label for="enabledOn">男</label>
					</div>
					<div class="radio-box">
						<input type="radio" id="gender_0" name="gender" value="0" <#if ("${leader.gender!}"== "0")> checked </#if> />
						<label for="gender_0">女</label>
					</div>
				</div>
			</div>
			
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2"><span
					class="c-red">*</span>地区：</label>
				<div class="formControls col-xs-8 col-sm-9">
				
					<select name="provinceId" id ="provinceId" class="select" style="width:120px;height:30px" >
							<option value="${leader.province_id!} selected ="true" ></option>
					</select>
					<select name="cityId" id ="cityId" class="select" style="width:120px;height:30px">
							
					</select>
					
				</div>
			</div>
			
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">身份证：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="${leader.idcard!}" placeholder=""
						id="idcard" name="idcard">
				</div>
			</div>
			
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">推荐人手机号：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="${leader.idcard!}" placeholder=""
						id="contactPerson" name="contactPerson">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">俱乐部：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<select name="clubId" id ="clubId" class="select" style="width:120px;height:30px">
							
					</select>
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">状态：</label>
				<div class="formControls col-xs-8 col-sm-9 skin-minimal">
					<div class="radio-box">
						<input name="isDelete" type="radio" id="isDelete_0" value="0"  <#if ("${leader.is_delete!''}"== "0"||"${leader.is_delete!''}"=="")> checked </#if> />
						<label for="isDelete_0">启用</label>
					</div>
					<div class="radio-box">
						<input type="radio" id="isDelete_1" name="isDelete" value="1" <#if ("${leader.is_delete!}"== "1")> checked </#if> />
						<label for="isDelete_1">禁用</label>
					</div>
					
				</div>
			</div>
			
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">个性签名：</label>
				<div class="formControls col-xs-8 col-sm-9">
				<textarea name="personalSign" id ="personalSign" cols="" rows="" class="textarea"  placeholder="说点什么...最少输入10个字符" 
				datatype="*10-100" dragonfly="true" nullmsg="备注不能为空！" 
				onKeyUp="textarealength(this,200)" >${leader.personal_sign!}</textarea>
				<p class="textarea-numberbar"><em class="textarea-length">0</em>/200</p>
					
				</div>
			</div>
			
			<div class="row cl">
				<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
					<button 
						class="btn btn-primary radius" type="submit" id = "club-add_submit" >
						<i class="Hui-iconfont">&#xe632;</i> 保存
					</button>					
					<button onClick="layer_close();" class="btn btn-default radius"
						type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
				</div>
			</div>
		</form>
	</div>

	<!--_footer 作为公共模版分离出去-->
	<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="lib/layer/2.1/layer.js"></script>
	<script type="text/javascript" src="lib/icheck/jquery.icheck.min.js"></script>
	<script type="text/javascript"
		src="lib/jquery.validation/1.14.0/jquery.validate.min.js"></script>
	<script type="text/javascript"
		src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
	<script type="text/javascript"
		src="lib/jquery.validation/1.14.0/messages_zh.min.js"></script>
	<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script>
	<script type="text/javascript" src="static/h-ui/js/H-ui.admin.js"></script>
	<script type="text/javascript" src="static/h-ui/js/comment.js"></script>
	<!--/_footer /作为公共模版分离出去-->

	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript"
		src="lib/webuploader/0.1.5/webuploader.min.js"></script>
	<script type="text/javascript">
	$(function(){
		//获取俱乐部下拉框
		$.ajax({
			cache: true,
            type: "POST",
            url:"common/selectClublist",
            async: false,
            success: function(data) {
            	$("#clubId").html("");
    			$.each(data,function(i,obj){
    				var cl_id = "${leader.club_id!}"
    				if(cl_id == obj.id){
    					$("#clubId").append("<option value='"+obj.id+"' selected='selected' >"+obj.clubShortName+"</option>");
    				}else{
    					$("#clubId").append("<option value='"+obj.id+"'>"+obj.clubShortName+"</option>");
    				}
    				
    				
    			});
                    
            }
		});
		
		// 加载省市
		loadAreaControl("provinceId","cityId");
		
		 $("#provinceId").change(function(){
				appendAreaControl(getAreaList($(this).val()),"cityId");
				$("#name").val($("#cityId").find("option:selected").text());
			});
			
			$("#cityId").change(function(){
				$("#name").val($(this).find("option:selected").text());
			});
			
			//$("#addForm").validate();
		
		function getAreaList(pid){
			var _data = null;
			/* $.get("common/areaList/"+pid,function(data){
				_data = data;
			},"json"); */
			$.ajax({
				cache: true,
	            type: "POST",
	            url:"common/areaList/"+pid,
	            async: false,
	            success: function(data) {
	            	_data = data
	                    
	            }
			});
			return _data;
		}
		
		function appendAreaControl(list,id){
			$("#"+id).html("");
			$.each(list,function(i,obj){
				var province = "${leader.province_id!}"
				var city = "${leader.city_id!}"
				
    				if(province == obj.id){
    					$("#"+id).append("<option value='"+obj.id+"' selected='selected' >"+obj.name+"</option>");
    				}else if(city == obj.id){
    					$("#"+id).append("<option value='"+obj.id+"' selected='selected' >"+obj.name+"</option>");
    				}else{
    					$("#"+id).append("<option value='"+obj.id+"'>"+obj.name+"</option>");
    				}
				
			});
		}
		
		function loadAreaControl(provinceId,cityId){
			
			appendAreaControl(getAreaList(1),"provinceId");
			appendAreaControl(getAreaList($("#provinceId").val()),"cityId");
			$("#name").val($("#cityId").find("option:selected").text());
		}
		
		$("#club-add_submit").click(function(){
			 $("#form-leader-add").validate({
					rules:{
						clubName:{
							required:true,
							minlength:2,
							maxlength:16
						},
						clubShortName:{
							required:true,
							minlength:2,
							maxlength:16
						},
						legalPerson:{
							required:true,
							minlength:2,
							maxlength:16
						},
						bankAccount:{
							required:true,
							digits:true,
						 	maxlength:30
						},organizationCode:{
							required:true,
							minlength:2,
							maxlength:16
						},contactPerson:{
							required:true,
							minlength:2,
							maxlength:16
						},contactPhone:{
							required:true,
							isMobile:true,
						},address:{
							required:true,
							minlength:2,
							maxlength:50
						},
					},
					onkeyup:false,
					focusCleanup:true,
					success:"valid",
					submitHandler:function(form){
						//ajax提交
						
						var url = "leader/saveLeader";
						if("${type}"=="3"){
							url = "leader/updateLeader";
						}
						$.ajax({
				            cache: true,
				            type: "POST",
				            url:url,
				            data:$('#form-leader-add').serialize(),// 你的formid
				            async: false,
				            error: function(request) {
				                layer.alert("操作失败！");
				            },
				            success: function(data) {
				            	if(data.code=="999"){
				            		layer.alert(data.msg);
				            	}else
				                layer.alert("操作成功！", function(index){
				                	  //do something
				                	  layer_close();
				                	});
				                    
				            }
				        });
					}
				});
			
			
		});
	})
	$(document).ready(function(){
		var type="${type!}";
		if( type =="2"){ // 编辑状态, 查看状态
			$("input").attr("disabled",true);
			$("select").attr("disabled",true);
			$("textarea").attr("disabled",true);
			$("#club-add_submit").hide();
		}else{
			$("#div-club-id").hide();
		}
		});
	</script>
</body>
</html>